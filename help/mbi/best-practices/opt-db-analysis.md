---
title: 优化数据库以进行分析
description: 了解如何优化数据库以供分析。
exl-id: e73e1a1e-c933-476d-97bc-bd8f52bb2fa1
source-git-commit: 14777b216bf7aaeea0fb2d0513cc94539034a359
workflow-type: tm+mt
source-wordcount: '876'
ht-degree: 0%

---

# 优化数据库

将运营数据库用于商业智能的主要好处是，无需构建或修改任何内容即可收集数据。 有价值的信息已经存在；您只需解锁它即可。

本主题包含一些建议，可帮助您优化数据库以进行分析，并从原始数据中得出切实可行的见解。

## 不删除数据

>[!TIP]
>
>影响您的业务（以及您自己的服务条款）的本地和国际法可能会影响您可以保留的数据类型以及保留多长时间。 遵守这些法律应该是您的首要任务。

当订单被取消、用户停用其帐户或产品被停产时，很可能需要删除数据库中的相关信息。 桌子不断变大，杂乱无章似乎是个明智的想法。 但是，删除行意味着此信息将永远丢失，或者您需要挖掘旧备份来查找它。

相反，您可以向表中添加一个状态列，以指示行何时不再处于活动状态或相关状态。 此外，还建议添加一列来存储进行更改的日期，或为历史更改创建日志。 如果表变得足够大，性能开始受到影响，请考虑将旧数据归档到用于分析的表。

## 很少覆盖数据

应谨慎覆盖数据。

以登录日期为例，许多公司存储的是上次登录日期，而不是历史登录次数表。 虽然您可能只需要上次登录日期来实现功能，但从分析角度来看，被覆盖的数据会造成巨大损失。 不保留这些操作的完整日志将导致无法查看有多少用户长时间离开后又重新激活。 它还使得无法基于登录构建用户参与同类群组分析等内容。

通常，如果您由于某种用户操作而更新记录，请不要覆盖有关上一个或单独用户操作的信息。

## 包括 `Updated_at` 随时间更新的数据列

例如，如果表的行将具有随时间变化的值， **order\_status** 更改自`processing` 到 `complete`，包括 **已更新\_at** 列来记录最新更改的时间。 确保 **已更新\_at** 值在首次插入新数据行时可用，当 **已更新\_at** 日期对应于 **created\_at** 日期。

除了针对分析进行优化， **已更新\_at** 列还允许您使用 [增量复制方法](../data-analyst/data-warehouse-mgr/cfg-replication-methods.md)，这有助于缩短更新周期的长度。

## 存储用户客户获取源

最常见的错误之一是 [用户获取源](../data-analyst/analysis/google-track-user-acq.md) (UAS)未存储在操作数据库中。 在出现问题的大多数情况下，仅通过跟踪UAS [!DNL Google Analytics] 或其他网站分析工具。 虽然这些工具可能很有价值，但单独在其中存储UAS存在一些缺点；例如，无法从这些工具中提取用户级别的数据。 如果可能的话，这通常是一个困难的过程。 获取此信息并将其与其他来源的数据（例如也存储在数据库中的行为和事务性信息）相匹配应该很容易。

将UAS存储在您自己的数据库中，通常是在线企业对其分析能力所能做的最大改进。 这允许按UAS分析销售额、用户参与度、回收期、客户存留期值、流失率以及其他关键指标。 [在决定要将营销资源投资到何处时，此数据至关重要](../data-analyst/analysis/most-value-source-channel.md).

太多公司只关注寻找以最低成本提供新用户的渠道。 如果您没有跟踪从每个渠道获得的用户的质量，则可能会吸引没有产生业务价值的用户。

## 数据表设置

### 设置主键

A [主键](https://en.wikipedia.org/wiki/Unique_key) 是一个未更改的列（或列集），它在表中生成唯一值。 主键非常重要，因为它们可以确保您的表在中正确复制 [!DNL MBI].

在构建主键时，为自动递增的列使用整数数据类型。 Adobe建议尽量避免使用多列主键。

如果您的表是SQL视图，请添加可充当主键的列。 [!DNL MBI] 能够自动将此列标识为主键。

### 为数据列分配数据类型

如果数据列未分配 [数据类型](https://en.wikipedia.org/wiki/Data_type)， [!DNL MBI] 猜测要使用的数据类型。 如果系统猜测不正确，在Adobe支持团队将列调整为正确的数据类型之前，您可能无法执行相关分析。 例如，如果日期列假定为数字数据类型，则可以使用日期维度分析一段时间内的趋势。

### 如果您有多个数据库，请向数据表添加前缀

如果有多个数据库连接到 [!DNL MBI]，Adobe建议您在表中添加前缀以避免混淆。 前缀可帮助您记住量度或数据维度的来源位置。

---
title: 优化数据库以进行分析
description: 了解如何优化数据库以进行分析。
exl-id: e73e1a1e-c933-476d-97bc-bd8f52bb2fa1
source-git-commit: 03a5161930cafcbe600b96465ee0fc0ecb25cae8
workflow-type: tm+mt
source-wordcount: '893'
ht-degree: 0%

---

# 优化数据库

使用业务智能操作数据库的主要好处是，为了收集数据，无需构建或修改任何内容。 有价值的信息已经存在；你只需要解锁它。

本主题包含一些建议，可帮助您优化数据库以进行分析，并从原始数据中获得可操作的分析。

## 不删除数据

>[!TIP]
>
>影响您的业务（以及您自己的服务条款）的当地和国际法律可能会影响您可以保留的数据类型以及保留数据的时间。 遵守这些法律应是您的首要任务。

取消订单、用户停用其帐户或产品停用后，会倾向于删除数据库中的关联信息。 桌子越来越多，消除杂乱似乎是一个审慎的想法。 但是，删除行意味着此信息会永远丢失，或者您需要挖掘旧备份才能找到它。

相反，您可以向表中添加状态列，以指示该行何时不再处于活动状态或不再相关。 还建议添加一列来存储更改的日期，或创建历史更改的日志。 如果表的大小已足以导致性能开始下降，请考虑将旧数据存档到用于分析的表中。

## 很少覆盖数据

应谨慎且谨慎地覆盖数据。

以登录日期为例，许多公司将存储上次登录日期，而不是历史登录表。 虽然出于功能目的，您可能只需要上次登录日期，但从分析角度来看，覆盖数据会造成巨大损失。 如果不保留这些操作的完整日志，则无法查看有多少用户在长时间离开后又重新激活。 此外，它也使得无法根据登录情况构建用户参与度同类群组分析等内容。

通常，如果由于某种用户操作而更新记录，则不要覆盖有关先前或单独用户操作的信息。

## 包括 `Updated_at` 一段时间内更新的数据的列

如果表行的值会随时间而改变，例如， **order\_status** 更改`processing` to `complete`，包括 **已更新\_at** 列来记录最新更改的时间。 确保 **已更新\_at** 首次插入新数据行时，该值可用 **已更新\_at** 日期对应于 **已创建\_at** 日期。

除了优化以进行分析外， **已更新\_at** 列还允许您使用 [增量复制方法](../data-analyst/data-warehouse-mgr/cfg-replication-methods.md)，可帮助缩短更新周期的长度。

## 存储用户客户获取源

最常见的错误之一是 [用户获取源](../data-analyst/analysis/google-track-user-acq.md) (UAS)未存储在操作数据库中。 在大多数情况下，如果存在此问题，则只会通过 [!DNL Google Analytics] 或其他一些web分析工具。 虽然这些工具可能极其有价值，但在它们中只存储UAS存在一些缺陷；例如，您无法从这些工具中提取用户级数据。 如果可能，通常是一个困难的过程。 获取此信息并将其与来自其他来源的数据（例如也存储在数据库中的行为和事务性信息）结合起来应该很容易。

将UAS存储在您自己的数据库中，通常是在线业务对其分析能力所能做出的最大改进。 这允许UAS分析销售、用户参与度、回报期、客户生命周期值、流失率以及其他关键量度。 [此数据在决定将营销资源投资到何处时至关重要](../data-analyst/analysis/most-value-source-channel.md).

太多公司只专注于寻找以最低成本为新用户提供新用户的渠道，但如果您没有跟踪从每个渠道获取的用户质量，那么就有可能吸引那些无法产生商业价值的用户。

## 数据表设置

### 设置主键

A [主键](http://en.wikipedia.org/wiki/Unique_key) 是一个不改变的列（或一组列），用于在表中生成唯一值。 主键非常重要，因为它们可确保在中正确复制您的表 [!DNL MBI].

构建主键时，对自动增加的列使用整数数据类型。 我们还建议您尽量避免使用多列主键。

如果表是SQL视图，请添加可充当主键的列。 [!DNL MBI] 将能够自动将此列标识为主键。

### 为数据列分配数据类型

如果数据列未分配 [数据类型](http://en.wikipedia.org/wiki/Data_type), [!DNL MBI] 将猜测要使用的数据类型。 如果系统猜错了，则在我们的支持团队将列调整为正确的数据类型之前，您可能无法执行相关分析。 例如，如果某个日期列被猜为数字数据类型，则可以使用该日期维度随时间呈现趋势。

### 如果您有多个数据库，请为数据表添加前缀

如果有多个数据库连接到 [!DNL MBI]，我们建议您为表添加前缀以避免混淆。 前缀可帮助您记住量度或数据维度的来源。

---
title: 了解您的 [!DNL MBI] 环境
description: 了解如何使用和改进您的 [!DNL MBI] 环境。
exl-id: 601b5fba-da02-4cc8-96ed-147c24f326f9
source-git-commit: 82882479d4d6bea712e8dd7c6b2e5b7715022cc3
workflow-type: tm+mt
source-wordcount: '770'
ht-degree: 0%

---

# 您的 [!DNL MBI] 环境

在分析商务数据时，请注意这些因素和常见的误解。 如果您需要帮助以确保正确使用商务架构，请立即 [联系支持](../guide-overview.md).

## [!DNL entity\_id]

您的许多表都包含一个名为 `entity\_id`. 在每个包含 `entity\_id`，该列用于标识唯一行。

例如， `sales\_order` 表是唯一顺序。 此表中的主键称为 `entity\_id`. 本专栏可以认为 `order\_id`. 在单独的表格中， `customer\_entity`，则每行都表示一个独特客户。 此表中的主键也称为 `entity\_id`，可视为 `customer\_id`.

在那些桌子里， `sales\_order.entity\_id` 不等于 `customer\_entity.entity\_id`. 对于包含的所有表集，此值均为true `entity\_id`: `table\_A.entity\_id` 不等于 `table\_B.entity\_id`.

## [!DNL Guest orders]

如果您允许客户在没有帐户的情况下从您的网站进行订购（来宾订购），则这些客户将不会在您的 `customer\_entity` 表。 此外，来宾所下的每个订单都将具有空值 `customer\_id` 值 `sales\_order` 表。

因此，如果您希望跟踪访客的行为随时间推移的变化，则必须在 `sales\_order` 表，使用客户标识符，例如 `customer\_email`.

如果您使用 `sales\_order` 表作为客户表，则在创建客户级别量度时必须谨慎。 例如，考虑平均生命周期收入量度。 此量度用于确定整个客户群的平均生命周期收入。 这首先需要一个新列，以便每个客户都返回其生命周期收入。 然后，您必须将此列平均化，以获取客户的平均生命周期收入。

如果您能够使用 `customer\_entity` 表格中，每行都是一个客户，每个客户只在该表格中存在一次。 因此，当您具有生命周期收入列时，您只需创建一个平均量度。 但是，如果您使用 `sales\_order` 表作为客户表，客户可能存在于许多行中。 设置存留期收入列后，给定客户的每个订单（行）将显示该客户的存留期收入；但您只想将该客户包含在整体平均量度中一次。

这里的诀窍是，您必须在量度中添加一个过滤器，以确保只包含每位客户一次。 我们建议您创建并使用一个名为 **我们计数的客户** 将筛选 **客户订单编号= 1** （您可能需要排除不需要的客户，以及其他过滤器）。 添加此过滤器可确保在客户级别的量度中只包含一次每位客户。

## 产品和类别

产品可以有多个类别，并且类别可用于多个产品。 因此，在设置类别级别分析时，必须谨慎使用正确的定义。 是否要顶级类别？ 二级类别？ 如果产品可以分为多个顶级类别，该怎么办？

假设一条牛仔裤分为三个不同的类别级别，具体由商务实施定义：“Clothing”（顶层）、“Outerwear”（二层）和“Pants”（三层）。 您可能希望按售出件数分析类别性能。 此分析所需的量度是 _已售项目_，它基于 `sales\_order\_item` 表。 因此，您需要将类别级别信息移到项目表中。 在 `sales\_order\_item` 表将具有关联的 `product\_id`，因此，如果您知道与产品关联的类别，则可以将该信息转到所需的表格。

在移动任何数据之前，您必须首先知道正确的连接和过滤器，以确保获得正确的类别。 对于某些分析，您可能需要知道“裤子”，但在其他分析中，“衣服”可能更合适。 它们是单独标识的不同类别。 了解每个类别级别的定义方式将确保您能够将单位销售归因于适合您特定分析的类别。

现在，假设您的网站主页上还有一个“我们的收藏夹”顶级类别。 您可能已经实施了商务商店，将这些牛仔裤纳入“服装”类别和“我们的收藏夹”类别。 如果是，则此牛仔裤将具有多个顶级类别。 在这种情况下，将单个顶级类别移到 `sales\_order\_item` 表没有什么意义，因为有多种选项。 为此，我们建议创建“是”/“否”列来检查特定类别。 例如， `Is product in Clothing category?` 和 `Is product in Our Favorites category?` 列将允许您检查产品是否属于这些特定类别。
